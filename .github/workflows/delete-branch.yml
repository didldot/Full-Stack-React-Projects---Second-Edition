name: Close Empty Lingohub Branch
run-name: ${{github.actor}} ran this workflow
on:
  #pull_request:
  #  types: [opened]
  pull_request_target: # needed for closing pull request (not just "pull_request")
    types: [opened]
    paths: # only runs when these files have changed / or not changed when prefixed with "!"
      - '!**.txt'
jobs:
  close-pull-request:
    if: startsWith(github.head_ref, 'lingohub-')
    runs-on: ubuntu-latest
    steps:
      - name: 'Close pull request which triggered pull_request_target'
        uses: superbrothers/close-pull-request@v3
        with:
          comment: 'Pull Request was automatically closed by the Github Action'
      - name: 'Send Message to Slack'
        id: slack
        uses: slackapi/slack-github-action@v1.23.0
        with:
          payload: |
            {
              "text": "The Pull Request Branch name started with lingohub"
            }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
